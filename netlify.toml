[build]
  # Папка с вашими HTML, CSS, JS файлами.
  publish = "public" 
  # Папка, где лежат ваши бессерверные функции
  functions = "netlify/functions"

# Настройки для локальной разработки через 'netlify dev'
[dev]
  publish = "public"
  functions = "netlify/functions"
  # Порт для локального запуска
  port = 3000

# Перенаправления (rewrites). Это направляет запросы с красивых URL на ваши функции.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/news/:splat"
  status = 200

[[redirects]]
  from = "/admin-api/*"
  to = "/.netlify/functions/news-admin/:splat"
  status = 200

[[redirects]]
  from = "/admin/login"
  to = "/.netlify/functions/auth"
  status = 200
  force = true # Обязательно, чтобы перехватить запрос
  conditions = { "method" = ["POST"] }

[[redirects]]
  from = "/admin/logout"
  to = "/.netlify/functions/auth"
  status = 200
  force = true

[[redirects]]
  from = "/admin/auth-check"
  to = "/.netlify/functions/auth"
  status = 200
  force = true